<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link data-th-href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link data-th-href="@{/css/main.css}" rel="stylesheet">
</head>

<body>

<div class="container">
    <div id="title">
        <h1>Spring Library on WebFlux + Thymeleaf</h1>
        <h2>Books:</h2>
    </div>
    <!-- Search form -->
    <div class="row">
        <form class="search-form" method="post" th:action="@{/books/search}" width="50%">
            <table>
                <tbody>
                    <tr>
                        <td>Book name:</td>
                        <td><input type="text" name="bookName" class="inputfield" placeholder="Book name"></td>
                    </tr>
                    <tr>
                        <td>Genre:</td>
                        <td><input type="text" name="genreMeaning" class="inputfield" placeholder="Genre"></td>
                    </tr>
                    <tr>
                        <td>Author:</td>
                        <td><input type="text" name="authorName" class="inputfield" placeholder="Author"></td>
                    </tr>
                    <tr>
                        <td>Publishing House Name:</td>
                        <td><input type="text" name="publishingHouseName" class="inputfield" placeholder="Publishing House Name"></td>
                    </tr>
                    <tr>
                        <td>publishing Year From:</td>
                        <td><input type="text" name="publishingYearFrom" class="inputfield" placeholder="Publishing Year From"></td>
                    </tr>
                    <tr>
                        <td>publishing Year To:</td>
                        <td><input type="text" name="publishingYearTo" class="inputfield" placeholder="Publishing Year To"></td>
                    </tr>
                    <tr>
                        <td>Pages From:</td>
                        <td><input type="text" name="pagesFrom" class="inputfield" placeholder="Pages From"></td>
                    </tr>
                    <tr>
                        <td>Pages To:</td>
                        <td><input type="text" name="pagesTo" class="inputfield" placeholder="Pages To"></td>
                    </tr>
                </tbody>
            </table>
            <button>Search</button>
        </form>
    </div>

    <!-- Result table -->
    <div class="row">
        <table id="books" class="table table-striped">
            <thead>
            <!-- tr -->
            <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Author</th>
                <th scope="col">Pages</th>
                <th scope="col">Genre</th>
                <th scope="col">Publishing house</th>
                <th scope="col">Publishing year</th>
                <th scope="col">Operations</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="book : ${books}">
                <td th:text="${book.id}">book.id</td>
                <td th:text="${book.name}">book.name</td>
                <td th:text="${book.author.name}">book.author.name</td>
                <td th:text="${book.pages}">book.pages</td>
                <td th:text="${book.genres[0].meaning}">book.genre.meaning</td>
                <td th:text="${book.publishingHouse.name}">book.publishingHouse.name</td>
                <td th:text="${book.publishingYear}">book.publishingYear</td>
                <td>
                    <a th:href="@{/books/edit/{id}(id=${book.id})}" role="button"> <span class="glyphicon glyphicon-edit"></span>Edit</a><br>
                    <a th:href="@{'/deleteBook/'+${book.id}}" role="button">Delete</a> <br>
                    <a th:href="@{'/books/' + ${book.id} + '/comments'}" role="button">Comments</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="row">
        <a href="/newBook">New book</a>
        <a href='/'>Back</a>
    </div>
</div>
</body>
